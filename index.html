<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather App</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="weather-app">
    <h1>üå§Ô∏è Weather App</h1>
    <div class="search-box">
      <input type="text" id="cityInput" placeholder="Enter city name">
      <button onclick="getWeatherByCity()">Search</button>
    </div>

    <div id="weatherResult" class="weather-card">
      <p>Loading weather...</p>
    </div>
  </div>

  <script>
    const API_KEY = "b0e8a262c6e74a388bb63142251708"; // your WeatherAPI key

    // Fetch weather by city
    async function getWeatherByCity() {
      const city = document.getElementById("cityInput").value;
      if (!city) return alert("Please enter a city name");
      fetchWeather(city);
    }

    // Fetch weather by coordinates
    async function fetchWeather(query) {
      try {
        const response = await fetch(
          `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${query}&aqi=no`
        );
        const data = await response.json();

        document.getElementById("weatherResult").innerHTML = `
          <h2>${data.location.name}, ${data.location.country}</h2>
          <img src="${data.current.condition.icon}" alt="Weather icon">
          <p>${data.current.condition.text}</p>
          <p>üå°Ô∏è ${data.current.temp_c}¬∞C | üí® ${data.current.wind_kph} kph</p>
        `;
      } catch (error) {
        document.getElementById("weatherResult").innerHTML = `<p>‚ùå Could not fetch weather</p>`;
      }
    }

    // Get user location automatically
    window.onload = () => {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            const { latitude, longitude } = pos.coords;
            fetchWeather(`${latitude},${longitude}`);
          },
          () => {
            document.getElementById("weatherResult").innerHTML = `<p>‚ö†Ô∏è Location access denied. Please search manually.</p>`;
          }
        );
      }
    };
  </script>
</body>
</html>
